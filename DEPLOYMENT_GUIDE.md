# éƒ¨ç½²æŒ‡å— - å¦‚ä½•é¿å…å¿«å–å•é¡Œ

## âš ï¸ å•é¡Œæ ¹æº

ä¹‹å‰ç¶²ç«™é¡¯ç¤ºèˆŠç‰ˆæœ¬çš„åŸå› æœ‰ä¸‰å€‹ï¼š

1. **ç€è¦½å™¨å¿«å–** - ç€è¦½å™¨æœƒå¿«å– JavaScript å’Œ CSS æª”æ¡ˆ
2. **GitHub Pages CDN å¿«å–** - GitHub Pages ä½¿ç”¨ CDNï¼Œæ›´æ–°éœ€è¦æ™‚é–“å‚³æ’­
3. **éŒ¯èª¤çš„éƒ¨ç½²æµç¨‹** - åœ¨éŒ¯èª¤çš„åˆ†æ”¯ä¸Šæ§‹å»ºï¼Œå°è‡´å¼•ç”¨èˆŠæª”æ¡ˆ

---

## âœ… å®Œæ•´è§£æ±ºæ–¹æ¡ˆ

### 1. è‡ªå‹•åŒ–éƒ¨ç½²è…³æœ¬

**ä½¿ç”¨æ–¹æ³•ï¼š**

```bash
cd /home/user/webapp
./deploy.sh
```

é€™å€‹è…³æœ¬æœƒï¼š
- âœ… è‡ªå‹•åˆ‡æ›åˆ° main åˆ†æ”¯ä¸¦æ›´æ–°
- âœ… å®Œå…¨æ¸…ç†èˆŠçš„æ§‹å»ºæª”æ¡ˆå’Œå¿«å–
- âœ… é‡æ–°å®‰è£ä¾è³´ä¸¦æ§‹å»º
- âœ… é©—è­‰æ§‹å»ºçµæœ
- âœ… éƒ¨ç½²åˆ° gh-pages åˆ†æ”¯
- âœ… é©—è­‰éƒ¨ç½²çš„æª”æ¡ˆç‰ˆæœ¬æ­£ç¢º
- âœ… è‡ªå‹•æäº¤ä¸¦æ¨é€åˆ° GitHub

### 2. Vite è¨­å®šå„ªåŒ–

æª”æ¡ˆï¼š`client/vite.config.ts`

```typescript
build: {
  outDir: 'dist',
  assetsDir: 'assets',
  rollupOptions: {
    output: {
      // ç¢ºä¿æ¯æ¬¡æ§‹å»ºéƒ½ç”¢ç”Ÿå”¯ä¸€çš„æª”æ¡ˆåç¨±
      entryFileNames: 'assets/[name]-[hash].js',
      chunkFileNames: 'assets/[name]-[hash].js',
      assetFileNames: 'assets/[name]-[hash].[ext]',
    },
  },
  // æ¸…é™¤èˆŠçš„è¼¸å‡º
  emptyOutDir: true,
}
```

**ä½œç”¨ï¼š**
- æ¯æ¬¡æ§‹å»ºéƒ½æœƒç”¢ç”Ÿæ–°çš„æª”æ¡ˆåç¨±ï¼ˆå¦‚ `index-BjHn9paA.js`ï¼‰
- æª”æ¡ˆåç¨±åŒ…å«å…§å®¹é›œæ¹Šå€¼ï¼Œå…§å®¹è®Šæ›´å‰‡æª”æ¡ˆåç¨±è®Šæ›´
- å¾¹åº•é¿å…ç€è¦½å™¨ä½¿ç”¨å¿«å–çš„èˆŠæª”æ¡ˆ

### 3. æ‰‹å‹•éƒ¨ç½²æµç¨‹ï¼ˆå¦‚æœä¸ä½¿ç”¨è…³æœ¬ï¼‰

**æ­¥é©Ÿ 1: åœ¨ main åˆ†æ”¯ä¸Šæ§‹å»º**

```bash
cd /home/user/webapp
git checkout main
git pull origin main

cd client
rm -rf dist node_modules/.vite  # å®Œå…¨æ¸…ç†
npm install
npm run build
```

**æ­¥é©Ÿ 2: ä¿å­˜æ§‹å»ºåˆ°è‡¨æ™‚ä½ç½®**

```bash
cd /home/user/webapp
mkdir -p /tmp/build
cp -r client/dist/* /tmp/build/
```

**æ­¥é©Ÿ 3: éƒ¨ç½²åˆ° gh-pages**

```bash
git checkout gh-pages

# å®Œå…¨æ¸…ç†èˆŠæª”æ¡ˆ
rm -rf assets/* images/*

# è¤‡è£½æ–°çš„æ§‹å»ºæª”æ¡ˆ
cp -r /tmp/build/assets/* assets/
cp -r /tmp/build/images/* images/
cp /tmp/build/index.html .
cp index.html 404.html

# æ¸…ç†è‡¨æ™‚æª”æ¡ˆ
rm -rf /tmp/build
```

**æ­¥é©Ÿ 4: é©—è­‰**

```bash
# æª¢æŸ¥ index.html å¼•ç”¨çš„æª”æ¡ˆ
grep "assets/" index.html

# æª¢æŸ¥è³‡ç”¢æª”æ¡ˆæ˜¯å¦å­˜åœ¨
ls -lh assets/
```

**æ­¥é©Ÿ 5: æäº¤ä¸¦æ¨é€**

```bash
git add -A
git commit -m "deploy: éƒ¨ç½²æœ€æ–°ç‰ˆæœ¬ - $(date -u '+%Y-%m-%d %H:%M UTC')"
git push origin gh-pages

# åˆ‡æ›å› main åˆ†æ”¯
git checkout main
```

---

## ğŸš« **çµ•å°ä¸è¦åšçš„äº‹æƒ…**

### âŒ éŒ¯èª¤ 1: åœ¨ gh-pages åˆ†æ”¯ä¸Šæ§‹å»º

```bash
# âŒ éŒ¯èª¤ï¼
git checkout gh-pages
cd client
npm run build  # gh-pages ä¸Šçš„æºç¢¼å¯èƒ½æ˜¯èˆŠçš„ï¼
```

**ç‚ºä»€éº¼éŒ¯èª¤ï¼š**
- gh-pages åˆ†æ”¯çš„æºç¢¼ï¼ˆ`src/` ç›®éŒ„ï¼‰å¯èƒ½ä¸æ˜¯æœ€æ–°çš„
- æœƒç”¢ç”ŸèˆŠç‰ˆæœ¬çš„æ§‹å»ºæª”æ¡ˆ

**âœ… æ­£ç¢ºåšæ³•ï¼š**
- æ°¸é åœ¨ main åˆ†æ”¯ä¸Šæ§‹å»º
- ç„¶å¾Œå°‡æ§‹å»ºçµæœè¤‡è£½åˆ° gh-pages

### âŒ éŒ¯èª¤ 2: ä¸æ¸…ç†èˆŠçš„å¿«å–

```bash
# âŒ éŒ¯èª¤ï¼
cd client
npm run build  # å¯èƒ½ä½¿ç”¨å¿«å–çš„èˆŠæª”æ¡ˆ
```

**âœ… æ­£ç¢ºåšæ³•ï¼š**
```bash
cd client
rm -rf dist node_modules/.vite  # æ¸…ç†å¿«å–
npm run build
```

### âŒ éŒ¯èª¤ 3: ä¸é©—è­‰éƒ¨ç½²çµæœ

```bash
# âŒ éŒ¯èª¤ï¼
cp client/dist/index.html .
git add -A
git commit -m "deploy"
git push
# æ²’æœ‰æª¢æŸ¥ index.html æ˜¯å¦å¼•ç”¨æ­£ç¢ºçš„æª”æ¡ˆï¼
```

**âœ… æ­£ç¢ºåšæ³•ï¼š**
```bash
cp client/dist/index.html .
grep "assets/" index.html  # é©—è­‰å¼•ç”¨
ls -lh assets/             # ç¢ºèªæª”æ¡ˆå­˜åœ¨
git add -A
git commit -m "deploy"
git push
```

---

## ğŸŒ **ä½¿ç”¨è€…ç«¯å¿«å–æ¸…é™¤**

å³ä½¿éƒ¨ç½²æ­£ç¢ºï¼Œä½¿ç”¨è€…ä»ç„¶å¯èƒ½çœ‹åˆ°èˆŠç‰ˆæœ¬ï¼Œå› ç‚ºï¼š

### å•é¡Œ 1: GitHub Pages CDN å¿«å–

**æ™‚é–“ï¼š** 5-15 åˆ†é˜

**è§£æ±ºï¼š** ç­‰å¾… CDN æ›´æ–°ï¼Œç„¡æ³•åŠ é€Ÿ

### å•é¡Œ 2: ç€è¦½å™¨å¿«å–

**è§£æ±ºæ–¹æ³•ï¼š**

#### Chrome / Edge:
1. æŒ‰ `Ctrl + Shift + R` (Windows) æˆ– `Cmd + Shift + R` (Mac)
2. æˆ–å³éµé»æ“Šé‡æ–°æ•´ç†æŒ‰éˆ• â†’ é¸æ“‡ã€Œæ¸…é™¤å¿«å–ä¸¦å¼·åˆ¶é‡æ–°æ•´ç†ã€

#### Firefox:
1. æŒ‰ `Ctrl + Shift + R` (Windows) æˆ– `Cmd + Shift + R` (Mac)
2. æˆ–æŒ‰ `Ctrl + F5`

#### Safari:
1. æŒ‰ `Cmd + Option + R`
2. æˆ–é–‹å•Ÿã€Œé–‹ç™¼ã€é¸å–® â†’ é¸æ“‡ã€Œæ¸…ç©ºå¿«å–ã€

#### é€šç”¨æ–¹æ³•:
1. **ä½¿ç”¨ç„¡ç—•/éš±ç§æ¨¡å¼** - ä¸æœƒä½¿ç”¨å¿«å–
2. **æ¸…é™¤ç€è¦½å™¨è³‡æ–™**ï¼š
   - Chrome: è¨­å®š â†’ éš±ç§æ¬Šèˆ‡å®‰å…¨æ€§ â†’ æ¸…é™¤ç€è¦½è³‡æ–™ â†’ é¸æ“‡ã€Œå¿«å–åœ–ç‰‡å’Œæª”æ¡ˆã€
   - Firefox: é¸é … â†’ éš±ç§æ¬Šèˆ‡å®‰å…¨æ€§ â†’ Cookie èˆ‡ç¶²ç«™è³‡æ–™ â†’ æ¸…é™¤è³‡æ–™
   - Safari: åå¥½è¨­å®š â†’ é€²éš â†’ æ¸…ç©ºå¿«å–

---

## ğŸ“Š **é©—è­‰éƒ¨ç½²æˆåŠŸ**

### æª¢æŸ¥æ¸…å–®ï¼š

#### 1. æª¢æŸ¥ GitHub ä¸Šçš„æª”æ¡ˆ

è¨ªå•ï¼šhttps://github.com/mrlaifengshui/quantum-fengshui-purifier/tree/gh-pages

ç¢ºèªï¼š
- âœ… `index.html` æ›´æ–°æ™‚é–“æ˜¯æœ€æ–°çš„
- âœ… `assets/` ç›®éŒ„æœ‰æ­£ç¢ºçš„æª”æ¡ˆ
- âœ… æäº¤è¨Šæ¯é¡¯ç¤ºæœ€æ–°çš„éƒ¨ç½²æ™‚é–“

#### 2. æª¢æŸ¥ç¶²ç«™

è¨ªå•ï¼šhttps://mrlaifengshui.github.io/quantum-fengshui-purifier/

ç¢ºèªï¼š
- âœ… æ‰€æœ‰é é¢éƒ½èƒ½æ­£å¸¸è¼‰å…¥ï¼ˆä¸æ˜¯ç©ºç™½ï¼‰
- âœ… æŠ€è¡“åŸç†é é¢æ‰‹æ©Ÿç‰ˆæ’ç‰ˆæ­£ç¢ºï¼ˆåœ–åƒ-æ–‡å­—-åœ–åƒï¼‰
- âœ… æ‰€æœ‰åŠŸèƒ½éƒ½æ­£å¸¸é‹ä½œ

#### 3. æª¢æŸ¥æ§åˆ¶å°

1. æ‰“é–‹ç€è¦½å™¨é–‹ç™¼è€…å·¥å…·ï¼ˆF12ï¼‰
2. åˆ‡æ›åˆ°ã€ŒNetworkã€ï¼ˆç¶²è·¯ï¼‰æ¨™ç±¤
3. é‡æ–°æ•´ç†é é¢
4. æª¢æŸ¥ï¼š
   - âœ… JavaScript æª”æ¡ˆåç¨±æ˜¯æœ€æ–°çš„ï¼ˆå¦‚ `index-BjHn9paA.js`ï¼‰
   - âœ… æ²’æœ‰ 404 éŒ¯èª¤
   - âœ… æ‰€æœ‰è³‡æºéƒ½æˆåŠŸè¼‰å…¥

---

## ğŸ”„ **æœªä¾†çš„å·¥ä½œæµç¨‹**

### æ¯æ¬¡æ›´æ”¹ä»£ç¢¼å¾Œï¼š

1. **åœ¨ main åˆ†æ”¯ä¸Šé–‹ç™¼å’Œæ¸¬è©¦**
   ```bash
   git checkout main
   # ä¿®æ”¹ä»£ç¢¼
   git add .
   git commit -m "feat: æ–°åŠŸèƒ½æè¿°"
   git push origin main
   ```

2. **ä½¿ç”¨è‡ªå‹•åŒ–éƒ¨ç½²è…³æœ¬**
   ```bash
   ./deploy.sh
   ```

3. **ç­‰å¾…ä¸¦é©—è­‰**
   - ç­‰å¾… 5-15 åˆ†é˜ï¼ˆGitHub Pages CDN æ›´æ–°ï¼‰
   - æ¸…é™¤ç€è¦½å™¨å¿«å–
   - è¨ªå•ç¶²ç«™ä¸¦é©—è­‰

### å¦‚æœé‡åˆ°å•é¡Œï¼š

1. **æª¢æŸ¥ GitHub Actions**ï¼ˆå¦‚æœæœ‰è¨­å®šï¼‰
2. **æª¢æŸ¥ gh-pages åˆ†æ”¯çš„æœ€æ–°æäº¤**
3. **æ‰‹å‹•é©—è­‰ index.html å’Œè³‡ç”¢æª”æ¡ˆ**
4. **å¦‚æœéœ€è¦ï¼Œé‡æ–°é‹è¡Œéƒ¨ç½²è…³æœ¬**

---

## ğŸ“ **ç¸½çµï¼šé—œéµè¦é»**

### âœ… **å¿…é ˆåšï¼š**

1. **æ°¸é åœ¨ main åˆ†æ”¯ä¸Šæ§‹å»º**
2. **ä½¿ç”¨è‡ªå‹•åŒ–éƒ¨ç½²è…³æœ¬**
3. **é©—è­‰éƒ¨ç½²çµæœ**
4. **æé†’ä½¿ç”¨è€…æ¸…é™¤ç€è¦½å™¨å¿«å–**

### âŒ **çµ•å°ä¸è¦ï¼š**

1. **ä¸è¦åœ¨ gh-pages åˆ†æ”¯ä¸Šæ§‹å»º**
2. **ä¸è¦è·³éå¿«å–æ¸…ç†æ­¥é©Ÿ**
3. **ä¸è¦ä¸é©—è­‰å°±æ¨é€**

### ğŸ¯ **å¿«å–ç ´å£ç­–ç•¥çš„å¥½è™•ï¼š**

- âœ… æ¯æ¬¡æ§‹å»ºç”¢ç”Ÿå”¯ä¸€çš„æª”æ¡ˆåç¨±
- âœ… ç€è¦½å™¨è‡ªå‹•ä½¿ç”¨æ–°æª”æ¡ˆ
- âœ… ä¸éœ€è¦æ‰‹å‹•æ¸…é™¤ CDN å¿«å–
- âœ… æ›´æ–°ç«‹å³ç”Ÿæ•ˆï¼ˆé™¤äº† GitHub Pages CDN å»¶é²ï¼‰

---

## ğŸš€ **å¿«é€Ÿåƒè€ƒ**

```bash
# å®Œæ•´éƒ¨ç½²æµç¨‹ï¼ˆæ¨è–¦ï¼‰
./deploy.sh

# æˆ–æ‰‹å‹•éƒ¨ç½²
git checkout main
cd client && rm -rf dist node_modules/.vite && npm install && npm run build && cd ..
mkdir -p /tmp/build && cp -r client/dist/* /tmp/build/
git checkout gh-pages
rm -rf assets/* images/*
cp -r /tmp/build/assets/* assets/ && cp -r /tmp/build/images/* images/
cp /tmp/build/index.html . && cp index.html 404.html
rm -rf /tmp/build
git add -A && git commit -m "deploy: $(date -u '+%Y-%m-%d %H:%M UTC')" && git push origin gh-pages
git checkout main
```

---

**æœ€å¾Œæ›´æ–°ï¼š** 2025-12-05  
**ç¶­è­·è€…ï¼š** mrlaifengshui  
**å°ˆæ¡ˆï¼š** Quantum Feng Shui Air Purification
